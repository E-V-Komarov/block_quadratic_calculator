define(['jquery'], function($) {
    
    function updateResults(data) {
        // Проверяем, есть ли в ответе данные для x1 и x2
        if (data.x1 !== undefined && data.x2 !== undefined) {
            $('#result_x1').text('x1: ' + data.x1);
            $('#result_x2').text('x2: ' + data.x2);
        } else if (data.error !== undefined) {
            // Если сервер вернул ошибку, отображаем её
            $('#result_x1').text('Error: ' + data.error);
            $('#result_x2').text('');
        }
    }

    return {
        init: function(selector) {
            $(selector).on('submit', function(e) {
                e.preventDefault(); // Предотвращаем стандартную отправку формы
                var form = $(this);

                // Отправляем данные на сервер с помощью AJAX
                $.ajax({
                    type: 'POST',
                    url: form.attr('action'),
                    data: form.serialize(), // Сериализуем данные формы
                    dataType: 'json', // Ожидаем ответ в формате JSON
                    success: function(response) {
                        // Обрабатываем успешный ответ сервера
                        updateResults(response);
                    },
                    error: function(xhr, status, error) {
                        // Обрабатываем возможные ошибки запроса
                        console.error('AJAX Error: ' + status + ' - ' + error);
                    }
                });
            });
        }
    };
});